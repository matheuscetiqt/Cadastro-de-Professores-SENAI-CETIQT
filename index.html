<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gest√£o de Professores</title>

<style>
body{font-family:Arial;background:#eef2f7;padding:20px}
h1{color:#1e3a8a}
.box{background:white;padding:15px;border-radius:8px;margin-bottom:20px;box-shadow:0 2px 6px rgba(0,0,0,0.1)}
h2{margin-top:0;color:#1e3a8a}
input,select,button{padding:8px;margin:5px 0;width:100%;border-radius:6px;border:1px solid #ccc}
button{background:#2563eb;color:white;border:none;cursor:pointer}
button:hover{background:#1d4ed8}
.resultado{background:#f1f5f9;padding:10px;border-radius:6px;margin-top:10px;font-size:16px}
</style>
</head>
<body>

<h1>üéì Gest√£o Acad√™mica</h1>

<!-- CADASTRAR PROFESSOR -->
<div class="box">
<h2>Cadastrar Professor</h2>
<input type="text" id="profNome" placeholder="Nome do Professor">
<input type="number" id="profValor" placeholder="Valor por hora (R$)">
<button onclick="cadastrarProfessor()">Salvar Professor</button>
</div>

<!-- CADASTRAR DISCIPLINA -->
<div class="box">
<h2>Cadastrar Disciplina</h2>
<input type="text" id="discNome" placeholder="Nome da Disciplina">
<input type="number" id="discCarga" placeholder="Carga Hor√°ria">
<button onclick="cadastrarDisciplina()">Salvar Disciplina</button>
</div>

<!-- VINCULAR PROFESSOR √ÄS DISCIPLINAS -->
<div class="box">
<h2>Vincular Disciplinas ao Professor</h2>
<select id="vincProf" onchange="listarDisciplinasCheckbox()"></select>
<div id="listaCheckbox"></div>
<button onclick="salvarVinculo()">Salvar V√≠nculo</button>
</div>

<!-- CONSULTA -->
<div class="box">
<h2>Consulta</h2>
<select id="consultaProf" onchange="carregarDisciplinasProfessor()">
<option value="">Selecione o professor</option>
</select>

<select id="consultaDisc" onchange="calcularValor()">
<option value="">Selecione a disciplina</option>
</select>

<div id="resultado" class="resultado"></div>
</div>

<script>
let professores = JSON.parse(localStorage.getItem("professores")) || [];
let disciplinas = JSON.parse(localStorage.getItem("disciplinas")) || [];

function salvar(){
    localStorage.setItem("professores", JSON.stringify(professores));
    localStorage.setItem("disciplinas", JSON.stringify(disciplinas));
}

function cadastrarProfessor(){
    professores.push({
        nome: profNome.value,
        valorHora: parseFloat(profValor.value),
        disciplinas: []
    });
    salvar();
    atualizarSelects();
    alert("Professor cadastrado!");
}

function cadastrarDisciplina(){
    disciplinas.push({
        nome: discNome.value,
        carga: parseFloat(discCarga.value)
    });
    salvar();
    alert("Disciplina cadastrada!");
}

function atualizarSelects(){
    vincProf.innerHTML = "";
    consultaProf.innerHTML = '<option value="">Selecione o professor</option>';
    professores.forEach((p,i)=>{
        vincProf.innerHTML += `<option value="${i}">${p.nome}</option>`;
        consultaProf.innerHTML += `<option value="${i}">${p.nome}</option>`;
    });
}

function listarDisciplinasCheckbox(){
    const pIndex = vincProf.value;
    if(pIndex==="") return;

    listaCheckbox.innerHTML = "";
    disciplinas.forEach((d,i)=>{
        listaCheckbox.innerHTML += `
            <label>
                <input type="checkbox" value="${i}"> ${d.nome} (${d.carga}h)
            </label><br>`;
    });
}

function salvarVinculo(){
    const pIndex = vincProf.value;
    const marcadas = Array.from(listaCheckbox.querySelectorAll("input:checked")).map(c=>parseInt(c.value));
    professores[pIndex].disciplinas = marcadas;
    salvar();
    alert("V√≠nculo salvo!");
}

function carregarDisciplinasProfessor(){
    const pIndex = consultaProf.value;
    consultaDisc.innerHTML = '<option value="">Selecione a disciplina</option>';
    if(pIndex==="") return;

    professores[pIndex].disciplinas.forEach(dIndex=>{
        const d = disciplinas[dIndex];
        consultaDisc.innerHTML += `<option value="${dIndex}">${d.nome}</option>`;
    });
}

function calcularValor(){
    const pIndex = consultaProf.value;
    const dIndex = consultaDisc.value;
    if(pIndex===""||dIndex==="") return;

    const professor = professores[pIndex];
    const disciplina = disciplinas[dIndex];
    const total = professor.valorHora * disciplina.carga;

    resultado.innerHTML = `
        üë®‚Äçüè´ <strong>Professor:</strong> ${professor.nome}<br>
        üìò <strong>Disciplina:</strong> ${disciplina.nome}<br>
        ‚è≥ <strong>Carga Hor√°ria:</strong> ${disciplina.carga}h<br>
        üíµ <strong>Valor por Hora:</strong> R$ ${professor.valorHora}<br><br>
        üí∞ <strong>VALOR TOTAL:</strong> <span style="font-size:20px;color:#16a34a">R$ ${total}</span>
    `;
}

atualizarSelects();
</script>

</body>
</html>

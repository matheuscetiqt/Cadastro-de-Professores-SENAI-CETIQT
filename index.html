<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema de Professores</title>
<style>
body { font-family: Arial; background:#f5f5f5; padding:20px; }
.box { background:white; padding:20px; border-radius:10px; margin-bottom:20px; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
input, select, button { width:100%; padding:8px; margin-top:8px; border-radius:5px; border:1px solid #ccc; }
button { background:#1e3a8a; color:white; font-weight:bold; cursor:pointer; }
.resultado { background:#eef2ff; padding:15px; margin-top:15px; border-left:5px solid #1e3a8a;}
h2 { color:#1e3a8a; }
</style>
</head>
<body>

<h1>Sistema Inteligente de Professores</h1>

<div class="box">
<h2>Cadastro de Professor + Disciplina</h2>
<input type="text" id="profNome" placeholder="Nome do Professor">
<input type="number" id="profValor" placeholder="Valor da Hora Aula">

<hr>

<h3>Adicionar Disciplina ao Professor</h3>
<input type="text" id="discNome" placeholder="Nome da Disciplina">
<input type="number" id="discCarga" placeholder="Carga HorÃ¡ria da Disciplina">
<button onclick="adicionarDisciplinaTemp()">Adicionar Disciplina</button>

<ul id="listaDisciplinasTemp"></ul>

<button onclick="salvarProfessor()">Salvar Professor</button>
</div>

<div class="box">
<h2>Pesquisa Inteligente</h2>
<label>Professor:</label>
<select id="pesquisaProfessor" onchange="carregarDisciplinasProfessor()"></select>

<label>Disciplina:</label>
<select id="pesquisaDisciplina" onchange="calcularValor()"></select>

<div id="resultadoFinal" class="resultado"></div>
</div>

<script>
let professores = JSON.parse(localStorage.getItem("professores")) || [];
let disciplinasTemp = [];

window.onload = atualizarSelectProfessores;

function salvarStorage() {
    localStorage.setItem("professores", JSON.stringify(professores));
}

function adicionarDisciplinaTemp() {
    const nome = discNome.value;
    const carga = parseInt(discCarga.value);
    if(!nome || isNaN(carga)) return alert("Preencha disciplina corretamente!");

    disciplinasTemp.push({ nome, carga });
    listaDisciplinasTemp.innerHTML += `<li>${nome} - ${carga}h</li>`;
    discNome.value = discCarga.value = "";
}

function salvarProfessor() {
    const nome = profNome.value;
    const valorHora = parseFloat(profValor.value);

    if(!nome || isNaN(valorHora) || disciplinasTemp.length === 0)
        return alert("Preencha tudo!");

    professores.push({ nome, valorHora, disciplinas: disciplinasTemp });
    salvarStorage();
    atualizarSelectProfessores();

    profNome.value = profValor.value = "";
    listaDisciplinasTemp.innerHTML = "";
    disciplinasTemp = [];
}

function atualizarSelectProfessores() {
    pesquisaProfessor.innerHTML = "<option value=''>Selecione</option>";
    professores.forEach((p,i) => {
        pesquisaProfessor.innerHTML += `<option value="${i}">${p.nome}</option>`;
    });
}

function carregarDisciplinasProfessor() {
    const index = pesquisaProfessor.value;
    const prof = professores[index];
    pesquisaDisciplina.innerHTML = "<option value=''>Selecione</option>";

    if(!prof) return;

    prof.disciplinas.forEach((d,i) => {
        pesquisaDisciplina.innerHTML += `<option value="${i}">${d.nome}</option>`;
    });
}

function calcularValor() {
    const pIndex = pesquisaProfessor.value;
    const dIndex = pesquisaDisciplina.value;

    const prof = professores[pIndex];
    const disc = prof.disciplinas[dIndex];

    const total = prof.valorHora * disc.carga;

    resultadoFinal.innerHTML = `
        <strong>Professor:</strong> ${prof.nome}<br>
        <strong>Disciplina:</strong> ${disc.nome}<br>
        <strong>Valor Hora:</strong> R$ ${prof.valorHora.toFixed(2)}<br>
        <strong>Carga HorÃ¡ria:</strong> ${disc.carga}h<br>
        <h3>ðŸ’° Valor Total: R$ ${total.toFixed(2)}</h3>
    `;
}
</script>

</body>
</html>

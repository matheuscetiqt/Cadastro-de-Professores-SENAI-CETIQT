<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema Inteligente de Professores</title>
<style>
body { font-family: Arial; background:#f5f5f5; margin:0; padding:20px; }
h2 { color:#1e3a8a; margin-top:30px; }
.box { background:white; padding:20px; border-radius:10px; margin-bottom:20px; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
input, select, button {
    width:100%; padding:8px; margin-top:8px;
    border-radius:5px; border:1px solid #ccc;
}
button {
    background:#1e3a8a; color:white; font-weight:bold;
    cursor:pointer; margin-top:10px;
}
.resultado {
    background:#eef2ff; padding:15px; margin-top:15px;
    border-left:5px solid #1e3a8a;
}
</style>
</head>

<body>

<h1>Sistema Inteligente de C√°lculo de Professores</h1>

<div class="box">
<h2>üë®‚Äçüè´ Cadastro de Professor</h2>
<input type="text" id="profNome" placeholder="Nome do Professor">
<input type="number" id="profValor" placeholder="Valor da hora aula">
<button onclick="cadastrarProfessor()">Cadastrar Professor</button>
</div>

<div class="box">
<h2>üìö Cadastro de Disciplina</h2>
<input type="text" id="discNome" placeholder="Nome da Disciplina">
<input type="number" id="discCarga" placeholder="Carga Hor√°ria">
<button onclick="cadastrarDisciplina()">Cadastrar Disciplina</button>
</div>

<div class="box">
<h2>üîó Relacionar Professor √† Disciplina</h2>
<select id="relProf"></select>
<select id="relDisc"></select>
<button onclick="relacionar()">Salvar Rela√ß√£o</button>
</div>

<div class="box">
<h2>üîç Pesquisa Inteligente</h2>
<label>Professor:</label>
<select id="pesquisaProfessor" onchange="carregarDisciplinasProfessor()"></select>

<label>Disciplina:</label>
<select id="pesquisaDisciplina" onchange="calcularValor()"></select>

<div id="resultadoFinal" class="resultado"></div>
</div>

<script>
let professores = [];
let disciplinas = [];
let relacoes = [];

window.onload = function () {
    professores = JSON.parse(localStorage.getItem('professores')) || [];
    disciplinas = JSON.parse(localStorage.getItem('disciplinas')) || [];
    relacoes = JSON.parse(localStorage.getItem('relacoes')) || [];
    atualizarSelects();
};

function salvarTudo() {
    localStorage.setItem('professores', JSON.stringify(professores));
    localStorage.setItem('disciplinas', JSON.stringify(disciplinas));
    localStorage.setItem('relacoes', JSON.stringify(relacoes));
}

function atualizarSelects() {
    const relProf = document.getElementById("relProf");
    const relDisc = document.getElementById("relDisc");
    const pesquisaProfessor = document.getElementById("pesquisaProfessor");

    relProf.innerHTML = pesquisaProfessor.innerHTML = "<option value=''>Selecione Professor</option>";
    relDisc.innerHTML = "<option value=''>Selecione Disciplina</option>";

    professores.forEach(p => {
        relProf.innerHTML += `<option value="${p.nome}">${p.nome}</option>`;
        pesquisaProfessor.innerHTML += `<option value="${p.nome}">${p.nome}</option>`;
    });

    disciplinas.forEach(d => {
        relDisc.innerHTML += `<option value="${d.nome}">${d.nome}</option>`;
    });
}

function cadastrarProfessor() {
    const nome = profNome.value;
    const valorHora = parseFloat(profValor.value);
    if (!nome || isNaN(valorHora)) return alert("Preencha corretamente!");
    professores.push({ nome, valorHora });
    salvarTudo();
    atualizarSelects();
    profNome.value = profValor.value = "";
}

function cadastrarDisciplina() {
    const nome = discNome.value;
    const carga = parseInt(discCarga.value);
    if (!nome || isNaN(carga)) return alert("Preencha corretamente!");
    disciplinas.push({ nome, carga });
    salvarTudo();
    atualizarSelects();
    discNome.value = discCarga.value = "";
}

function relacionar() {
    const prof = relProf.value;
    const disc = relDisc.value;
    if (!prof || !disc) return alert("Selecione os dois!");
    relacoes.push({ professor: prof, disciplina: disc });
    salvarTudo();
    alert("Rela√ß√£o salva!");
}

function carregarDisciplinasProfessor() {
    const profNome = pesquisaProfessor.value;
    const selectDisc = pesquisaDisciplina;
    selectDisc.innerHTML = "<option value=''>Selecione</option>";

    relacoes.filter(r => r.professor === profNome)
        .forEach(r => selectDisc.innerHTML += `<option value="${r.disciplina}">${r.disciplina}</option>`);
}

function calcularValor() {
    const profNome = pesquisaProfessor.value;
    const discNome = pesquisaDisciplina.value;

    const professor = professores.find(p => p.nome === profNome);
    const disciplina = disciplinas.find(d => d.nome === discNome);
    if (!professor || !disciplina) return;

    const total = professor.valorHora * disciplina.carga;

    resultadoFinal.innerHTML = `
        <strong>Professor:</strong> ${profNome}<br>
        <strong>Disciplina:</strong> ${discNome}<br>
        <strong>Valor Hora:</strong> R$ ${professor.valorHora.toFixed(2)}<br>
        <strong>Carga Hor√°ria:</strong> ${disciplina.carga}h<br>
        <h3>üí∞ Valor Total: R$ ${total.toFixed(2)}</h3>
    `;
}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Gestão de Professores</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  padding: 20px;
}
h1 { text-align: center; }
.card {
  background: #fff;
  padding: 15px;
  border-radius: 8px;
  margin-bottom: 20px;
}
input, button {
  padding: 8px;
  margin: 5px 0;
  width: 100%;
}
button {
  background: #007bff;
  color: white;
  border: none;
  cursor: pointer;
}
button:hover { background: #0056b3; }
table {
  width: 100%;
  border-collapse: collapse;
}
th, td {
  padding: 8px;
  border: 1px solid #ccc;
  text-align: center;
}
.actions button {
  margin: 2px;
}
</style>
</head>

<body>

<h1>Gestão de Professores</h1>

<div class="card">
<h3>Cadastrar Professor</h3>
<input id="nome" placeholder="Nome do professor">
<input id="disciplinas" placeholder="Disciplinas (separadas por vírgula)">
<input id="valorHora" type="number" placeholder="Valor da hora/aula">
<button onclick="salvarProfessor()">Salvar</button>
</div>

<div class="card">
<h3>Pesquisar</h3>
<input id="pesquisa" placeholder="Nome ou disciplina" onkeyup="listarProfessores()">
</div>

<div class="card">
<h3>Professores Cadastrados</h3>
<table>
<thead>
<tr>
<th>Nome</th>
<th>Disciplinas</th>
<th>Valor Hora</th>
<th>Carga Horária</th>
<th>Total</th>
<th>Ações</th>
</tr>
</thead>
<tbody id="tabela"></tbody>
</table>
</div>

<script>
let professores = JSON.parse(localStorage.getItem("professores")) || [];
let editIndex = null;

function salvarProfessor() {
  const nome = document.getElementById("nome").value;
  const disciplinas = document.getElementById("disciplinas").value.split(",");
  const valorHora = parseFloat(document.getElementById("valorHora").value);

  if (!nome || !disciplinas || !valorHora) return alert("Preencha todos os campos");

  const professor = { nome, disciplinas, valorHora };

  if (editIndex !== null) {
    professores[editIndex] = professor;
    editIndex = null;
  } else {
    professores.push(professor);
  }

  localStorage.setItem("professores", JSON.stringify(professores));
  limparCampos();
  listarProfessores();
}

function listarProfessores() {
  const filtro = document.getElementById("pesquisa").value.toLowerCase();
  const tabela = document.getElementById("tabela");
  tabela.innerHTML = "";

  professores.forEach((p, i) => {
    if (
      p.nome.toLowerCase().includes(filtro) ||
      p.disciplinas.join(",").toLowerCase().includes(filtro)
    ) {
      tabela.innerHTML += `
        <tr>
          <td>${p.nome}</td>
          <td>${p.disciplinas.join(", ")}</td>
          <td>R$ ${p.valorHora.toFixed(2)}</td>
          <td>
            <input type="number" id="ch${i}" placeholder="Horas">
          </td>
          <td>
            <button onclick="calcular(${i})">Calcular</button>
            <span id="total${i}"></span>
          </td>
          <td class="actions">
            <button onclick="editar(${i})">Editar</button>
            <button onclick="excluir(${i})" style="background:red">Excluir</button>
          </td>
        </tr>
      `;
    }
  });
}

function calcular(i) {
  const horas = document.getElementById(`ch${i}`).value;
  if (!horas) return alert("Informe a carga horária");
  const total = horas * professores[i].valorHora;
  document.getElementById(`total${i}`).innerText = `R$ ${total.toFixed(2)}`;
}

function editar(i) {
  document.getElementById("nome").value = professores[i].nome;
  document.getElementById("disciplinas").value = professores[i].disciplinas.join(",");
  document.getElementById("valorHora").value = professores[i].valorHora;
  editIndex = i;
}

function excluir(i) {
  if (confirm("Deseja excluir este professor?")) {
    professores.splice(i, 1);
    localStorage.setItem("professores", JSON.stringify(professores));
    listarProfessores();
  }
}

function limparCampos() {
  document.getElementById("nome").value = "";
  document.getElementById("disciplinas").value = "";
  document.getElementById("valorHora").value = "";
}

listarProfessores();
</script>

</body>
</html>

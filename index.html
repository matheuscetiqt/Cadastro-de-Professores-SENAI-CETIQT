<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GestÃ£o de Professores</title>

<style>
body{font-family:Arial;background:#eef2f7;padding:20px}
h2{background:#1e3a8a;color:white;padding:10px;border-radius:6px}
.box{background:white;padding:15px;border-radius:8px;margin-bottom:20px;box-shadow:0 2px 6px rgba(0,0,0,0.1)}
input,select,button{padding:8px;margin:5px 0;width:100%;border-radius:6px;border:1px solid #ccc}
button{background:#2563eb;color:white;border:none;cursor:pointer}
button:hover{background:#1d4ed8}
.resultado{background:#f1f5f9;padding:10px;border-radius:6px;margin-top:10px}
.disc-prof{background:#f8fafc;padding:8px;border-radius:6px;margin-top:5px}
</style>
</head>
<body>

<h1>ðŸŽ“ GestÃ£o AcadÃªmica</h1>

<!-- CADASTRO DISCIPLINA -->
<div class="box">
<h2>Cadastrar Disciplina</h2>
<input type="text" id="disciplinaNome" placeholder="Nome da Disciplina">
<input type="number" id="disciplinaCarga" placeholder="Carga HorÃ¡ria">
<button onclick="cadastrarDisciplina()">Salvar Disciplina</button>
</div>

<!-- CADASTRO PROFESSOR -->
<div class="box">
<h2>Cadastrar Professor</h2>
<input type="text" id="professorNome" placeholder="Nome do Professor">

<label>Selecione as disciplinas e informe o valor por disciplina:</label>
<div id="disciplinasProfessor"></div>

<button onclick="cadastrarProfessor()">Salvar Professor</button>
</div>

<!-- CONSULTA -->
<div class="box">
<h2>Consulta</h2>
<select id="consultaProfessor" onchange="carregarDisciplinasProfessor()">
<option value="">Selecione o professor</option>
</select>

<select id="consultaDisciplina" onchange="mostrarDetalhes()">
<option value="">Selecione a disciplina</option>
</select>

<div id="infoDisciplina" class="resultado"></div>
</div>

<script>
let disciplinas = JSON.parse(localStorage.getItem("disciplinas")) || [];
let professores = JSON.parse(localStorage.getItem("professores")) || [];

function salvar(){ 
    localStorage.setItem("disciplinas", JSON.stringify(disciplinas));
    localStorage.setItem("professores", JSON.stringify(professores));
}

function cadastrarDisciplina(){
    const nome = disciplinaNome.value;
    const carga = disciplinaCarga.value;
    disciplinas.push({nome,carga});
    salvar();
    montarDisciplinasProfessor();
    alert("Disciplina cadastrada!");
}

function montarDisciplinasProfessor(){
    const div = document.getElementById("disciplinasProfessor");
    div.innerHTML = "";
    disciplinas.forEach((d,i)=>{
        div.innerHTML += `
        <div class="disc-prof">
            <input type="checkbox" id="disc${i}"> ${d.nome}
            <input type="number" id="valor${i}" placeholder="Valor R$ para esta disciplina">
        </div>`;
    });
}

function cadastrarProfessor(){
    const nome = professorNome.value;
    let discDoProf = [];

    disciplinas.forEach((d,i)=>{
        if(document.getElementById("disc"+i).checked){
            const valor = document.getElementById("valor"+i).value;
            discDoProf.push({disciplinaIndex:i, valor});
        }
    });

    professores.push({nome, disciplinas:discDoProf});
    salvar();
    atualizarProfessores();
    alert("Professor cadastrado!");
}

function atualizarProfessores(){
    const sel = consultaProfessor;
    sel.innerHTML = '<option value="">Selecione o professor</option>';
    professores.forEach((p,i)=>{
        sel.innerHTML += `<option value="${i}">${p.nome}</option>`;
    });
}

function carregarDisciplinasProfessor(){
    const pIndex = consultaProfessor.value;
    const selDisc = consultaDisciplina;
    selDisc.innerHTML = '<option value="">Selecione a disciplina</option>';
    if(pIndex==="") return;

    professores[pIndex].disciplinas.forEach((d,i)=>{
        selDisc.innerHTML += `<option value="${i}">${disciplinas[d.disciplinaIndex].nome}</option>`;
    });
}

function mostrarDetalhes(){
    const pIndex = consultaProfessor.value;
    const dIndex = consultaDisciplina.value;
    if(pIndex===""||dIndex==="") return;

    const profDisc = professores[pIndex].disciplinas[dIndex];
    const disciplina = disciplinas[profDisc.disciplinaIndex];

    infoDisciplina.innerHTML = `
    <strong>Disciplina:</strong> ${disciplina.nome}<br>
    <strong>Carga HorÃ¡ria:</strong> ${disciplina.carga}h<br>
    <strong>Valor do Professor:</strong> R$ ${profDisc.valor}
    `;
}

montarDisciplinasProfessor();
atualizarProfessores();
</script>

</body>
</html>
